{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/app.js","src/domhandler.js","src/pin.js"],"names":[],"mappings":"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","file":"compiled.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Pin from './pin.js'\r\n\r\nclass PicklockGame {\r\n  constructor(){\r\n    let self = this;\r\n    this.canvas = document.getElementById('PicklockGame');\r\n    this.context = this.canvas.getContext('2d');\r\n    this.lastposition = {};\r\n    this.pin = new Pin();\r\n\r\n    window.addEventListener('resize', () => { self.resizeCanvas() }, false);\r\n\r\n    window.addEventListener('mousemove', () => {\r\n      if (typeof(self.lastposition.x) != 'undefined' && !self.pin.twisting) {\r\n        let deltaX = self.lastposition.x - event.offsetX,\r\n            deltaY = self.lastposition.y - event.offsetY;\r\n        if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX > 0) {\r\n            self.pin.setPinPosition(-0.5);\r\n        } else if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX < 0) {\r\n            self.pin.setPinPosition(0.5);\r\n        }\r\n        self.pin.calculatetwistlimit();\r\n      };\r\n      self.lastposition = {\r\n          x : event.offsetX,\r\n          y : event.offsetY\r\n      };\r\n    }, false);\r\n\r\n    window.addEventListener('mousedown', () => {\r\n      self.pin.twisting = true;\r\n    }, false);\r\n\r\n    window.addEventListener('mouseup', () => {\r\n      self.pin.twisting = false;\r\n    }, false);\r\n\r\n    this.resizeCanvas();\r\n    this.frame();\r\n  }\r\n\r\n  resizeCanvas(){\r\n    this.canvas.width = window.innerWidth;\r\n    this.canvas.height = window.innerHeight;\r\n  }\r\n\r\n  frame(){\r\n    let self = this;\r\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    if(this.pin.twisting){\r\n      this.pin.twistlock();\r\n    } else{\r\n      this.pin.untwistlock();\r\n    }\r\n    this.drawlock();\r\n    this.drawlockhole();\r\n    this.drawpin();\r\n    window.requestAnimationFrame(() => {self.frame();});\r\n  }\r\n\r\n  drawlock(){\r\n    this.context.save();\r\n    this.context.beginPath();\r\n    this.context.lineWidth = 0;\r\n    this.context.arc(this.canvas.width / 2, this.canvas.height / 2, 100, 0, 2 * Math.PI, false);\r\n    this.context.fillStyle = '#bdc3c7';\r\n    this.context.fill();\r\n    this.context.stroke();\r\n    this.context.closePath();\r\n    this.context.restore();\r\n  }\r\n\r\n  drawlockhole(){\r\n    let percentage = this.pin.completed / 100;\r\n    let degrees = percentage * 90.0;\r\n    let radians = degrees * (Math.PI / 180);\r\n    let x = this.canvas.width / 2;\r\n    let y = this.canvas.height / 2;\r\n\r\n    this.context.save();\r\n    this.context.translate( x, y );\r\n    this.context.rotate( radians );\r\n    this.context.translate( -x, -y );\r\n    this.context.fillRect( x, y, 4, 18 );\r\n    this.context.fillRect( x, y, 4, -18 );\r\n    this.context.fillRect( x, y, -4, 18 );\r\n    this.context.fillRect( x, y, -4, -18 );\r\n    this.context.restore();\r\n  }\r\n\r\n  drawpin(){\r\n    let offset = this.pin.vibrating ? 2 : 0;\r\n    let percentage = (this.pin.point + offset) / 100;\r\n    let degrees = (percentage + 0.5) * 180.0;\r\n    let radians = degrees * (Math.PI / 180);\r\n    let x = this.canvas.width / 2;\r\n    let y = this.canvas.height / 2;\r\n\r\n    this.context.save();\r\n    this.context.translate( x, y );\r\n    this.context.rotate( radians );\r\n    this.context.translate( -x, -y );\r\n    this.context.fillStyle = '#f1c40f';\r\n    this.context.fillRect( x-1, y, 4, 170 );\r\n    this.context.fillRect( x+1, y, -4, 170 );\r\n    this.context.restore();\r\n  }\r\n}\r\n\r\nnew PicklockGame();\r\n","export default class DomHandler {\r\n  constructor(){\r\n    this.innerpopout = document.querySelectorAll('.pop-stripe')[0];\r\n    this.score = document.querySelectorAll('.score')[0];\r\n  }\r\n\r\n  pop(message, color){\r\n    let self = this;\r\n    this.popoutstart(message, color);\r\n    setTimeout(() => {\r\n      self.popoutend();\r\n    }, 1000);\r\n  }\r\n\r\n  popoutstart(message, color){\r\n    this.innerpopout.style.background = color;\r\n    this.innerpopout.textContent = message;\r\n    this.innerpopout.classList.add('show');\r\n\r\n  }\r\n\r\n  popoutend(){\r\n    this.innerpopout.classList.remove('show');\r\n  }\r\n\r\n  setscore(lvl){\r\n    this.score.textContent = `YOU'VE PICKED ${lvl-1} LOCKS IN A ROW.`;\r\n  }\r\n}\r\n","import DomHandler from './domhandler.js'\r\n\r\nexport default class Pin {\r\n  constructor(){\r\n    let self = this;\r\n    this.range = {\r\n      min: 0,\r\n      max: 100\r\n    };\r\n    this.level = 0;\r\n    this.currentposition = 0;\r\n    this.threshold = 0;\r\n    this.point = 50;\r\n    this.domhandler = new DomHandler();\r\n    this.limit = 0;\r\n    this.twisting = false;\r\n    this.vibrating = false;\r\n\r\n    let _duration = 100;\r\n    Object.defineProperty(this, 'duration', {\r\n      get: () => {\r\n          return _duration;\r\n      },\r\n      set: (value) => {\r\n          _duration = value;\r\n\r\n          if(_duration % 2 === 0){\r\n            self.vibrating = !self.vibrating;\r\n          }\r\n          if(!_duration){\r\n            this.domhandler.pop(\"Pin broke!\", \"#c0392b\");\r\n            this.resetLockpick(1);\r\n          }\r\n      }\r\n    });\r\n\r\n    let _completed = 0;\r\n    Object.defineProperty(this, 'completed', {\r\n      get: () => {\r\n          return _completed;\r\n      },\r\n      set: (value) => {\r\n          _completed = value;\r\n\r\n          if(_completed === 100){\r\n            this.domhandler.pop(\"Lock opened!\", \"#27af60\");\r\n            self.resetLockpick(self.level + 1);\r\n          }\r\n      }\r\n    });\r\n\r\n    this.duration = 100;\r\n    this.completed = 0;\r\n\r\n    this.resetLockpick(1);\r\n  }\r\n\r\n  setPinPosition(value){\r\n    const valueadded = this.point + value;\r\n    if(valueadded >= 0 && valueadded <= 100){\r\n      this.point = valueadded;\r\n    }\r\n  }\r\n\r\n  calculatetwistlimit(){\r\n    let pointrange = { min: this.currentposition - this.threshold, max: this.currentposition + this.threshold };\r\n    if(this.point < pointrange.min){\r\n      this.limit = this.percentageprogress(this.point, this.range.min, pointrange.min);\r\n    } else if(this.point > pointrange.max){\r\n      this.limit = this.percentageprogress(100 - this.point, 100 - pointrange.max, 0) * -1;\r\n    } else {\r\n      this.limit = 100;\r\n    }\r\n  }\r\n\r\n  percentageprogress(currentvalue, min, max){\r\n    return currentvalue / (max - min) * 100;\r\n  }\r\n\r\n  twistlock(){\r\n    if(this.completed < this.limit){\r\n      this.completed += 2;\r\n      return;\r\n    }\r\n    if(this.completed < 100 && this.duration > 0){\r\n      this.duration -= 1;\r\n    }\r\n  }\r\n\r\n  untwistlock(){\r\n    if(this.completed > 0){\r\n      this.completed -= 2;\r\n      this.vibrating = true;\r\n    }\r\n  }\r\n\r\n  resetLockpick(lvl){\r\n    this.level = lvl;\r\n    this.threshold = 20 / this.level;\r\n    this.currentposition = Math.floor(Math.random() * (this.range.max - this.range.min + 1)) + this.range.min;\r\n    this.duration = 100;\r\n    this.twisting = false;\r\n    this.completed = 0;\r\n    this.domhandler.setscore(this.level);\r\n  }\r\n}\r\n"]}